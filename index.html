<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Classic Decor</title>
    <meta
      name="description"
      content="Discover the latest acrylic art and decor at Classic Decor. Shop unique wall art, clocks, calligraphy, and more to enhance your living space."
    />
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
  </head>
  <body class="home-page">
    <header class="header">
      <div class="logo">
        <a href="index.html" class="logo-text">Classic Decor</a>
      </div>
      <nav>
        <ul></ul>
      </nav>
      <div class="header-actions">
        <a href="shop.html" class="icon-btn" title="Shop"
          ><i class="fa-solid fa-store"></i
        ></a>
        <a href="#" id="search-toggle" class="icon-btn" title="Search"
          ><i class="fa-solid fa-magnifying-glass"></i
        ></a>
        <a href="login.html" class="icon-btn" title="Account"
          ><i class="fa-regular fa-user"></i
        ></a>
        <a href="cart.html" class="icon-btn" title="Cart"
          ><i class="fa-solid fa-cart-shopping"></i
          ><span id="nav-cart-count">0</span></a
        >
      </div>

      <!-- Search overlay (hidden until toggled) -->
      <div id="search-overlay" class="search-overlay" aria-hidden="true">
        <div class="search-panel">
          <button
            id="search-close"
            class="search-close"
            aria-label="Close search"
          >
            &times;
          </button>
          <form id="search-form" class="search-form" role="search">
            <input
              id="search-input"
              type="search"
              name="q"
              placeholder="Search products, categories..."
              aria-label="Search"
              autocomplete="off"
            />
            <button type="submit" class="search-submit">Search</button>
          </form>
        </div>
      </div>
    </header>
    <nav class="category-nav">
      <div class="category-container">
        <ul>
          <!-- categories will be loaded dynamically -->
        </ul>
      </div>
    </nav>

    <main>
      <section class="hero">
        <div class="hero-overlay">
          <div class="hero-content">
            <h1 class="typewriter">Bring Art & Elegance to Every Corner</h1>

            <p>Modern. Elegant. Handcrafted for your space.</p>
            <a href="shop.html" class="shop-btn">Shop Now</a>
          </div>
        </div>
      </section>
      <section class="featured-products">
        <h2>Featured Products</h2>
        <div class="product-grid">
          <div class="product-item">
            <img
              src="images/acrylic wall art.jpg"
              alt="Acrylic Wall Art - Classic Decor"
              title="Acrylic Wall Art"
            />
            <h3>Wall Art</h3>
            <p>PKR 4900</p>
          </div>
          <div class="product-item">
            <img
              src="images/acrylic wall clock.jpg"
              alt="Acrylic Wall Clock - Classic Decor"
              title="Acrylic Wall Clock"
            />
            <h3>Wall Clock</h3>
            <p>PKR 5900</p>
          </div>
          <div class="product-item">
            <img
              src="images/islamic acrylic calligraphy.jpg"
              alt="Islamic Acrylic Calligraphy - Classic Decor"
              title="Islamic Acrylic Calligraphy"
            />
            <h3>Islamic Calligraphy</h3>
            <p>PKR 6900</p>
          </div>
          <div class="product-item">
            <img
              src="images/wall decor mirror.jpg"
              alt="Wall Decor Mirror - Classic Decor"
              title="Wall Decor Mirror"
            />
            <h3>Wall Decor Mirror</h3>
            <p>PKR 7900</p>
          </div>
          <div class="product-item">
            <img
              src="images/Acrylic Name Plates.jpg"
              alt="Acrylic Name Plates - Classic Decor"
              title="Acrylic Name Plates"
            />
            <h3>Name Plates</h3>
            <p>PKR 8900</p>
          </div>
          <div class="product-item">
            <img
              src="images/Acrylic Photo Frames.jpg"
              alt="Acrylic Photo Frames - Classic Decor"
              title="Acrylic Photo Frames"
            />
            <h3>Photo Frames</h3>
            <p>PKR 9900</p>
          </div>
          <div class="product-item">
            <img
              src="images/Acrylic kids decor room.jpg"
              alt="Acrylic Kids Decor Room - Classic Decor"
              title="Acrylic Kids Decor Room"
            />
            <h3>Kids Decor Room</h3>
            <p>PKR 10900</p>
          </div>

          <div class="product-item">
            <img
              src="images/Acrylic Flower Vases.jpg"
              alt="Acrylic Flower Vases - Classic Decor"
              title="Acrylic Flower Vases"
            />
            <h3>Flower Vases</h3>
            <p>PKR 12900</p>
          </div>
          <div class="product-item">
            <img
              src="images/Acrylic Shelves.jpg"
              alt="Shelves - Classic Decor"
              title="Shelves"
            />
            <h3>Shelves</h3>
            <p>PKR 12900</p>
          </div>
        </div>
      </section>
      <section class="about-overlay-section" aria-label="About Classic Decor">
        <div class="about-overlay">
          <div class="about-card">
            <h2>About Classic Decor</h2>
            <p>
              Our culture is founded on partnership, respect, and passion. From
              the designer who crafts fresh ideas, to the makers who bring them
              to life, to the customers who choose our work for their homes — we
              are united by a commitment to quality acrylic decor. We
              collaborate with care to deliver the very best.
            </p>
          </div>
        </div>
      </section>
    </main>

    <section class="new-arrivals">
      <h2>New Arrivals</h2>
      <div class="arrival-slider">
        <div class="slider-track">
          <div class="slide"><img src="images/P3.jpg" alt="" /></div>
          <div class="slide">
            <img src="images/acrylic wall art.jpg" alt="" />
          </div>
          <div class="slide">
            <img src="images/islamic acrylic calligraphy.jpg" alt="" />
          </div>
          <div class="slide">
            <img src="images/wall decor mirror.jpg" alt="" />
          </div>
          <div class="slide">
            <img src="images/Acrylic Name Plates.jpg" alt="" />
          </div>

          <!-- repeat slides for seamless loop -->
          <div class="slide"><img src="images/P3.jpg" alt="" /></div>
          <div class="slide">
            <img src="images/acrylic wall art.jpg" alt="" />
          </div>
          <div class="slide">
            <img src="images/islamic acrylic calligraphy.jpg" alt="" />
          </div>
          <div class="slide">
            <img src="images/wall decor mirror.jpg" alt="" />
          </div>
          <div class="slide">
            <img src="images/Acrylic Name Plates.jpg" alt="" />
          </div>
        </div>
      </div>
    </section>

    <section class="why-us">
      <h2>Why Choose Classic Decor?</h2>
      <div class="why-grid">
        <div class="why-item">
          <h3>Premium Quality</h3>
          <p>
            We craft each acrylic product with precision for long-lasting
            durability.
          </p>
        </div>
        <div class="why-item">
          <h3>Customized Designs</h3>
          <p>Your ideas, your style — uniquely designed decor just for you.</p>
        </div>
        <div class="why-item">
          <h3>Fast Delivery</h3>
          <p>Delivery available across Pakistan with 100% safety packaging.</p>
        </div>
      </div>
    </section>

    <section class="reviews-section" aria-label="Latest Reviews">
      <div class="reviews-header">
        <h3>Latest Reviews</h3>
        <div class="reviews-summary" id="home-reviews-summary"></div>
      </div>
      <div class="reviews-grid" id="home-reviews"></div>
    </section>

    <footer>
      <div class="footer-container">
        <div class="footer-column">
          <h3 class="logo-text">Classic Decor</h3>
          <p>
            Your trusted destination for premium acrylic home décor. Explore
            modern wall art, elegant mirrors, clocks, and customized designs
            crafted to elevate your living space with style.
          </p>
        </div>
        <div class="footer-column">
          <h3>Customer Service</h3>
          <ul>
            <li><a href="about.html">About Us</a></li>
            <li><a href="contact.html">Contact Us</a></li>
            <li><a href="#">Shipping & Returns</a></li>
            <li><a href="#">FAQ</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Legal</h3>
          <ul>
            <li><a href="#">Terms of Service</a></li>
            <li><a href="#">Privacy Policy</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Stay Connected</h3>
          <div class="social-media">
            <a href="#"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"
                ></path></svg
            ></a>
            <a href="#"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                <path
                  d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"
                ></path>
                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg
            ></a>
            <a href="#"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"
                ></path></svg
            ></a>
          </div>
          <div class="newsletter">
            <p>Sign up for our newsletter to get the latest updates.</p>
            <form>
              <input type="email" placeholder="Enter your email" />
              <button type="submit">Subscribe</button>
            </form>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Classic Decor. All Rights Reserved.</p>
      </div>
    </footer>
    <script src="cart.js"></script>
    <script src="script.js"></script>
    <script>
      function starText(n) {
        const s = Math.max(1, Math.min(5, Number(n) || 0));
        return "★".repeat(s) + "☆".repeat(5 - s);
      }
      async function loadHomeReviews() {
        try {
          const s = await fetch("/api/reviews/summary");
          const summary = await s.json();
          const r = await fetch("/api/reviews");
          const list = await r.json();
          const sumEl = document.getElementById("home-reviews-summary");
          if (sumEl)
            sumEl.textContent = `${summary.count || 0} reviews • ${
              summary.average || 0
            }/5`;
          const container = document.getElementById("home-reviews");
          if (container) {
            const latest = (Array.isArray(list) ? list : [])
              .slice(-3)
              .reverse();
            container.innerHTML = latest
              .map(
                (rev) => `
              <div class="review-card">
                <div class="review-title">${rev.title || "Untitled"}</div>
                <div class="review-meta"><span class="stars">${starText(
                  rev.rating
                )}</span> • ${rev.name || "Anonymous"}</div>
                <div class="review-comment">${rev.comment || ""}</div>
              </div>
            `
              )
              .join("");
          }
        } catch (_) {}
      }
      document.addEventListener("DOMContentLoaded", loadHomeReviews);
    </script>
    <script>
      (function () {
        const API_BASE =
          location.protocol === "file:" ? "http://localhost:3001" : "";
        const defaultCats = [
          { id: "wall-art", name: "Wall Art" },
          { id: "wall-mirrors", name: "Wall Mirrors" },
          { id: "wall-clocks", name: "Wall Clocks" },
          { id: "name-plates", name: "Name Plates" },
          { id: "photo-frames", name: "Photo Frames" },
          { id: "kids-decor", name: "Kids Decor" },
          { id: "shelves", name: "Shelves" },
          { id: "vases", name: "Flower Vases" },
        ];

        function renderList(ul, list) {
          ul.innerHTML = list
            .map(
              (c) =>
                `<li><a href="categories.html?category=${encodeURIComponent(
                  c.id
                )}">${c.name}</a></li>`
            )
            .join("\n");
        }

        // Merge server categories into the default list: keep default order first, then append any extras
        function mergeCategories(defaults, server) {
          const map = new Map();
          // put defaults in order
          defaults.forEach((d) =>
            map.set(d.id, { id: d.id, name: d.name, count: d.count || 0 })
          );
          // add/merge server categories
          (server || []).forEach((s) => {
            const id = s.id || s.name;
            const name = s.name || s.id;
            if (map.has(id)) {
              const existing = map.get(id);
              existing.count = s.count || existing.count || 0;
              existing.name = name || existing.name;
            } else {
              map.set(id, { id, name, count: s.count || 0 });
            }
          });
          // produce array: defaults order first, then extras (sorted alphabetically)
          const result = [];
          defaults.forEach((d) => {
            if (map.has(d.id)) result.push(map.get(d.id));
          });
          const extras = [];
          Array.from(map.keys()).forEach((k) => {
            if (!defaults.some((d) => d.id === k)) extras.push(map.get(k));
          });
          extras.sort((a, b) => a.name.localeCompare(b.name));
          return result.concat(extras);
        }

        async function loadCategories() {
          const ul = document.querySelector(".category-nav ul");
          if (!ul) return;
          try {
            const r = await fetch(API_BASE + "/api/categories");
            if (!r.ok) {
              renderList(ul, defaultCats);
              return;
            }
            const list = await r.json();
            if (!Array.isArray(list) || list.length === 0) {
              renderList(ul, defaultCats);
              return;
            }
            const mapped = list.map((c) => ({
              id: c.id || c.name,
              name: c.name || c.id,
              count: c.count,
            }));
            const merged = mergeCategories(defaultCats, mapped);
            renderList(ul, merged);
          } catch (e) {
            console.warn("Failed loading categories", e);
            renderList(ul, defaultCats);
          }
        }
        loadCategories();
      })();
      // Search overlay toggle and submit
      (function () {
        const toggle = document.getElementById("search-toggle");
        const overlay = document.getElementById("search-overlay");
        const closeBtn = document.getElementById("search-close");
        const form = document.getElementById("search-form");
        const input = document.getElementById("search-input");
        function openSearch() {
          if (!overlay) return;
          overlay.setAttribute("aria-hidden", "false");
          overlay.classList.add("open");
          setTimeout(() => input && input.focus(), 50);
        }
        function closeSearch() {
          if (!overlay) return;
          overlay.setAttribute("aria-hidden", "true");
          overlay.classList.remove("open");
        }
        if (toggle)
          toggle.addEventListener("click", function (e) {
            e.preventDefault();
            openSearch();
          });
        if (closeBtn)
          closeBtn.addEventListener("click", function (e) {
            e.preventDefault();
            closeSearch();
          });
        if (overlay)
          overlay.addEventListener("click", function (e) {
            if (e.target === overlay) closeSearch();
          });
        document.addEventListener("keydown", function (e) {
          if (e.key === "Escape") closeSearch();
        });
        if (form)
          form.addEventListener("submit", function (e) {
            e.preventDefault();
            const q = ((input && input.value) || "").trim();
            if (!q) {
              closeSearch();
              return;
            }
            // Navigate to shop with query parameter
            const href = "shop.html?q=" + encodeURIComponent(q);
            location.href = href;
          });
      })();
    </script>
  </body>
</html>
